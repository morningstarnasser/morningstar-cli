import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { Box, Text } from "ink";
import { useTheme } from "../hooks/useTheme.js";
import { getModelDisplayName, detectProvider } from "../providers.js";
import { getAllAgents } from "../custom-agents.js";
import { getPermissionMode } from "../permissions.js";
import { projectSettingsExist } from "../settings.js";
import { getTheme } from "../theme.js";
import { getTodoStats } from "../todo.js";
import { loadMemories } from "../memory.js";
export function Banner({ config, ctx, skipPermissions }) {
    const { primary, secondary, accent, info, dim, star } = useTheme();
    const theme = getTheme();
    const modelName = getModelDisplayName(config.model);
    const provDisplay = config.provider || detectProvider(config.model);
    const langInfo = ctx.language
        ? ctx.language + (ctx.framework ? " / " + ctx.framework : "")
        : "unbekannt";
    const cwdShort = ctx.cwd.length > 42 ? "..." + ctx.cwd.slice(-39) : ctx.cwd;
    const permLabel = skipPermissions ? "BYPASS" : getPermissionMode();
    const settingsTag = projectSettingsExist(ctx.cwd) ? "active" : "none";
    const allAgents = getAllAgents();
    const agentNames = Object.entries(allAgents).map(([id, a]) => ({ id, color: a.color }));
    const todoStats = getTodoStats();
    const memCount = loadMemories().length;
    return (_jsxs(Box, { flexDirection: "column", marginTop: 1, children: [_jsx(Box, { flexDirection: "column", alignItems: "center", children: _jsxs(Box, { borderStyle: "double", borderColor: dim, paddingX: 2, flexDirection: "column", alignItems: "center", children: [_jsx(Text, { children: " " }), _jsxs(Text, { color: secondary, children: [". .  ", _jsx(Text, { color: accent, bold: true, children: "\u2605" }), "  . ."] }), _jsxs(Text, { color: secondary, children: [".  .", _jsx(Text, { color: primary, bold: true, children: "/" }), " . ", _jsx(Text, { color: primary, bold: true, children: "\\" }), ".  ."] }), _jsxs(Text, { color: secondary, children: [".  ", _jsx(Text, { color: primary, bold: true, children: "/" }), "  . ", _jsx(Text, { color: "#f0abfc", bold: true, children: "|" }), " .  ", _jsx(Text, { color: primary, bold: true, children: "\\" }), "  ."] }), _jsxs(Text, { color: secondary, children: ["\u2500\u2500 ", _jsx(Text, { color: primary, bold: true, children: "*" }), " \u2500\u2500\u2500\u2500\u2500", _jsx(Text, { color: accent, bold: true, children: "+" }), "\u2500\u2500\u2500\u2500\u2500 ", _jsx(Text, { color: primary, bold: true, children: "*" }), " \u2500\u2500"] }), _jsxs(Text, { color: secondary, children: [".  ", _jsx(Text, { color: primary, bold: true, children: "\\" }), "  . ", _jsx(Text, { color: "#f0abfc", bold: true, children: "|" }), " .  ", _jsx(Text, { color: primary, bold: true, children: "/" }), "  ."] }), _jsxs(Text, { color: secondary, children: [".  .", _jsx(Text, { color: primary, bold: true, children: "\\" }), " . ", _jsx(Text, { color: primary, bold: true, children: "/" }), ".  ."] }), _jsxs(Text, { color: secondary, children: [". .  ", _jsx(Text, { color: accent, bold: true, children: "\u2605" }), "  . ."] }), _jsx(Text, { children: " " }), _jsx(Text, { color: primary, bold: true, children: "M O R N I N G S T A R" }), _jsx(Text, { color: dim, children: "\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501" }), _jsx(Text, { color: "#f0abfc", children: "Terminal AI Coding Assistant" }), _jsxs(Text, { children: [_jsx(Text, { color: dim, children: "Powered by" }), " ", _jsx(Text, { color: accent, bold: true, children: "Mr.Morningstar" })] }), _jsx(Text, { color: info, children: "github.com/morningstarnasser" }), _jsx(Text, { children: " " })] }) }), _jsxs(Box, { flexDirection: "column", marginTop: 1, marginLeft: 2, borderStyle: "single", borderColor: dim, paddingX: 1, children: [_jsxs(Text, { children: [_jsx(Text, { color: primary, children: " \u2605 " }), _jsx(Text, { color: dim, children: "Model    " }), _jsx(Text, { color: info, children: modelName }), " ", _jsx(Text, { color: dim, children: "[" }), _jsx(Text, { color: accent, children: provDisplay }), _jsx(Text, { color: dim, children: "]" })] }), _jsxs(Text, { children: [_jsx(Text, { color: primary, children: " \u2605 " }), _jsx(Text, { color: dim, children: "Projekt  " }), _jsx(Text, { bold: true, children: ctx.projectName }), " ", _jsx(Text, { color: dim, children: "(" }), _jsx(Text, { children: langInfo }), _jsx(Text, { color: dim, children: ")" })] }), ctx.hasGit && (_jsxs(Text, { children: [_jsx(Text, { color: primary, children: " \u2605 " }), _jsx(Text, { color: dim, children: "Branch   " }), _jsx(Text, { color: accent, children: ctx.gitBranch || "unknown" })] })), _jsxs(Text, { children: [_jsx(Text, { color: primary, children: " \u2605 " }), _jsx(Text, { color: dim, children: "CWD      " }), _jsx(Text, { children: cwdShort })] }), _jsxs(Text, { children: [_jsx(Text, { color: primary, children: " \u2605 " }), _jsx(Text, { color: dim, children: "Perms    " }), skipPermissions ? _jsx(Text, { color: "#ef4444", bold: true, children: "BYPASS" }) : _jsx(Text, { color: dim, children: permLabel })] }), _jsxs(Text, { children: [_jsx(Text, { color: primary, children: " \u2605 " }), _jsx(Text, { color: dim, children: "Settings " }), settingsTag === "active" ? _jsx(Text, { color: "#10b981", children: "active" }) : _jsx(Text, { color: dim, children: "none" })] }), _jsxs(Text, { children: [_jsx(Text, { color: primary, children: " \u2605 " }), _jsx(Text, { color: dim, children: "Theme    " }), _jsx(Text, { color: primary, children: theme.name })] })] }), _jsxs(Box, { flexDirection: "column", marginTop: 1, marginLeft: 2, children: [_jsxs(Text, { children: [_jsx(Text, { color: dim, children: "  Tools   " }), _jsx(Text, { color: info, children: "read" }), _jsx(Text, { color: dim, children: " \u00B7 " }), _jsx(Text, { color: info, children: "write" }), _jsx(Text, { color: dim, children: " \u00B7 " }), _jsx(Text, { color: info, children: "edit" }), _jsx(Text, { color: dim, children: " \u00B7 " }), _jsx(Text, { color: info, children: "bash" }), _jsx(Text, { color: dim, children: " \u00B7 " }), _jsx(Text, { color: info, children: "grep" }), _jsx(Text, { color: dim, children: " \u00B7 " }), _jsx(Text, { color: info, children: "glob" }), _jsx(Text, { color: dim, children: " \u00B7 " }), _jsx(Text, { color: info, children: "ls" }), _jsx(Text, { color: dim, children: " \u00B7 " }), _jsx(Text, { color: info, children: "git" }), _jsx(Text, { color: dim, children: " \u00B7 " }), _jsx(Text, { color: info, children: "web" }), _jsx(Text, { color: dim, children: " \u00B7 " }), _jsx(Text, { color: info, children: "fetch" }), _jsx(Text, { color: dim, children: " \u00B7 " }), _jsx(Text, { color: info, children: "gh" })] }), _jsxs(Text, { children: [_jsx(Text, { color: dim, children: "  Agents  " }), agentNames.map((a, i) => (_jsxs(Text, { children: [i > 0 && _jsx(Text, { color: dim, children: " \u00B7 " }), _jsx(Text, { color: a.color, children: a.id })] }, a.id)))] }), _jsxs(Text, { children: [_jsx(Text, { color: dim, children: "  Hilfe   " }), _jsx(Text, { color: "#f0abfc", children: "/help" }), _jsx(Text, { color: dim, children: " \u00B7 " }), _jsx(Text, { color: "#f0abfc", children: "/features" }), _jsx(Text, { color: dim, children: " \u00B7 " }), _jsx(Text, { color: "#f0abfc", children: "/agents" }), _jsx(Text, { color: dim, children: " \u00B7 " }), _jsx(Text, { color: "#f0abfc", children: "/agent:create" }), _jsx(Text, { color: dim, children: " \u00B7 " }), _jsx(Text, { color: "#f0abfc", children: "/quit" })] })] }), (todoStats.open > 0 || memCount > 0) && (_jsxs(Box, { flexDirection: "column", marginTop: 1, marginLeft: 4, children: [todoStats.open > 0 && (_jsxs(Text, { color: accent, children: ["  ", todoStats.open, " offene Aufgabe(n) ", _jsx(Text, { color: dim, children: "\u2014 /todo list" })] })), memCount > 0 && (_jsxs(Text, { color: info, children: ["  ", memCount, " Notiz(en) gespeichert ", _jsx(Text, { color: dim, children: "\u2014 /memory list" })] }))] })), _jsx(Box, { marginLeft: 2, marginTop: 1, children: _jsxs(Text, { color: dim, children: ["  ", "â”€".repeat(60)] }) })] }));
}
//# sourceMappingURL=Banner.js.map