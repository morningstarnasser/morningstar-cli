import { jsxs as _jsxs, jsx as _jsx } from "react/jsx-runtime";
import { Box, Text } from "ink";
import { useTheme } from "../hooks/useTheme.js";
import { getModelDisplayName, detectProvider } from "../providers.js";
import { getAllAgents } from "../custom-agents.js";
import { getPermissionMode } from "../permissions.js";
import { getTodoStats } from "../todo.js";
import { loadMemories } from "../memory.js";
export function Banner({ config, ctx, skipPermissions }) {
    const { primary, secondary, accent, info, dim, error } = useTheme();
    const modelName = getModelDisplayName(config.model);
    const provDisplay = config.provider || detectProvider(config.model);
    const langInfo = ctx.language
        ? ctx.language + (ctx.framework ? " / " + ctx.framework : "")
        : "unknown";
    const cwdShort = ctx.cwd.length > 40 ? "..." + ctx.cwd.slice(-37) : ctx.cwd;
    const permLabel = skipPermissions ? "BYPASS" : getPermissionMode();
    const allAgents = getAllAgents();
    const agentCount = Object.keys(allAgents).length;
    const agentNames = Object.entries(allAgents).slice(0, 6).map(([id, a]) => ({ id, color: a.color }));
    const todoStats = getTodoStats();
    const memCount = loadMemories().length;
    const w = 58;
    const sep = "═".repeat(w);
    const thinSep = "─".repeat(w);
    return (_jsxs(Box, { flexDirection: "column", marginTop: 1, children: [_jsxs(Box, { flexDirection: "column", marginLeft: 1, children: [_jsxs(Text, { color: primary, children: ["\u2554", sep, "\u2557"] }), _jsxs(Text, { color: primary, children: ["\u2551", _jsx(Text, { color: dim, children: " ".repeat(w) }), "\u2551"] }), _jsxs(Text, { color: primary, children: ["\u2551", _jsxs(Text, { children: ["   ", _jsx(Text, { color: primary, bold: true, children: "\u2726" }), "  ", _jsx(Text, { color: primary, bold: true, children: "M O R N I N G S T A R" }), " ".repeat(w - 30)] }), "\u2551"] }), _jsxs(Text, { color: primary, children: ["\u2551", _jsxs(Text, { children: ["      ", _jsx(Text, { color: dim, children: "Terminal AI Coding Assistant" }), " ".repeat(w - 34)] }), "\u2551"] }), _jsxs(Text, { color: primary, children: ["\u2551", _jsx(Text, { color: dim, children: " ".repeat(w) }), "\u2551"] }), _jsxs(Text, { color: primary, children: ["\u2560", thinSep, "\u2563"] }), _jsxs(Text, { color: primary, children: ["\u2551", _jsx(Text, { color: dim, children: " ".repeat(w) }), "\u2551"] }), _jsxs(Text, { color: primary, children: ["\u2551", _jsxs(Text, { children: ["   ", _jsx(Text, { color: dim, children: "Model     " }), _jsx(Text, { color: accent, bold: true, children: modelName }), _jsxs(Text, { color: dim, children: [" ".repeat(Math.max(1, w - 16 - modelName.length - provDisplay.length)), "[", provDisplay, "]"] })] }), "\u2551"] }), _jsxs(Text, { color: primary, children: ["\u2551", _jsxs(Text, { children: ["   ", _jsx(Text, { color: dim, children: "Project   " }), _jsx(Text, { bold: true, children: ctx.projectName }), _jsxs(Text, { color: dim, children: [" ".repeat(Math.max(1, w - 16 - ctx.projectName.length - langInfo.length)), "(", langInfo, ")"] })] }), "\u2551"] }), ctx.hasGit && (_jsxs(Text, { color: primary, children: ["\u2551", _jsxs(Text, { children: ["   ", _jsx(Text, { color: dim, children: "Branch    " }), _jsx(Text, { color: accent, children: ctx.gitBranch || "unknown" }), " ".repeat(Math.max(0, w - 13 - (ctx.gitBranch || "unknown").length))] }), "\u2551"] })), _jsxs(Text, { color: primary, children: ["\u2551", _jsxs(Text, { children: ["   ", _jsx(Text, { color: dim, children: "CWD       " }), _jsx(Text, { children: cwdShort }), " ".repeat(Math.max(0, w - 13 - cwdShort.length))] }), "\u2551"] }), _jsxs(Text, { color: primary, children: ["\u2551", _jsxs(Text, { children: ["   ", _jsx(Text, { color: dim, children: "Perms     " }), skipPermissions ? _jsx(Text, { color: error, bold: true, children: "BYPASS" }) : _jsx(Text, { children: permLabel }), " ".repeat(Math.max(0, w - 13 - (skipPermissions ? 6 : permLabel.length)))] }), "\u2551"] }), _jsxs(Text, { color: primary, children: ["\u2551", _jsx(Text, { color: dim, children: " ".repeat(w) }), "\u2551"] }), _jsxs(Text, { color: primary, children: ["\u2560", thinSep, "\u2563"] }), _jsxs(Text, { color: primary, children: ["\u2551", _jsx(Text, { color: dim, children: " ".repeat(w) }), "\u2551"] }), _jsxs(Text, { color: primary, children: ["\u2551", _jsxs(Text, { children: ["   ", _jsx(Text, { color: dim, children: "Tools     " }), _jsx(Text, { color: info, children: "read" }), _jsx(Text, { color: dim, children: " \u00B7 " }), _jsx(Text, { color: info, children: "write" }), _jsx(Text, { color: dim, children: " \u00B7 " }), _jsx(Text, { color: info, children: "edit" }), _jsx(Text, { color: dim, children: " \u00B7 " }), _jsx(Text, { color: info, children: "bash" }), _jsx(Text, { color: dim, children: " \u00B7 " }), _jsx(Text, { color: info, children: "grep" }), _jsx(Text, { color: dim, children: " \u00B7 " }), _jsx(Text, { color: info, children: "glob" }), "  "] }), "\u2551"] }), _jsxs(Text, { color: primary, children: ["\u2551", _jsxs(Text, { children: ["             ", _jsx(Text, { color: info, children: "ls" }), _jsx(Text, { color: dim, children: " \u00B7 " }), _jsx(Text, { color: info, children: "git" }), _jsx(Text, { color: dim, children: " \u00B7 " }), _jsx(Text, { color: info, children: "web" }), _jsx(Text, { color: dim, children: " \u00B7 " }), _jsx(Text, { color: info, children: "fetch" }), _jsx(Text, { color: dim, children: " \u00B7 " }), _jsx(Text, { color: info, children: "gh" }), " ".repeat(w - 46)] }), "\u2551"] }), _jsxs(Text, { color: primary, children: ["\u2551", _jsxs(Text, { children: ["   ", _jsx(Text, { color: dim, children: "Agents    " }), agentNames.map((a, i) => _jsxs(Text, { children: [i > 0 ? _jsx(Text, { color: dim, children: " \u00B7 " }) : null, _jsx(Text, { color: a.color, children: a.id })] }, a.id))] }), "\u2551"] }), _jsxs(Text, { color: primary, children: ["\u2551", _jsx(Text, { color: dim, children: " ".repeat(w) }), "\u2551"] }), _jsxs(Text, { color: primary, children: ["\u255A", sep, "\u255D"] })] }), (todoStats.open > 0 || memCount > 0) && (_jsxs(Box, { flexDirection: "column", marginTop: 1, marginLeft: 3, children: [todoStats.open > 0 && (_jsxs(Text, { children: [_jsx(Text, { color: accent, children: "\u25CF" }), _jsxs(Text, { color: dim, children: [" ", todoStats.open, " open task(s) \u2014 /todo list"] })] })), memCount > 0 && (_jsxs(Text, { children: [_jsx(Text, { color: info, children: "\u25CF" }), _jsxs(Text, { color: dim, children: [" ", memCount, " note(s) saved \u2014 /memory list"] })] }))] })), _jsxs(Box, { marginLeft: 3, marginTop: 1, children: [_jsx(Text, { color: dim, children: "  " }), _jsx(Text, { color: info, children: "/help" }), _jsx(Text, { color: dim, children: " \u00B7 " }), _jsx(Text, { color: info, children: "/features" }), _jsx(Text, { color: dim, children: " \u00B7 " }), _jsx(Text, { color: info, children: "/model" }), _jsx(Text, { color: dim, children: " \u00B7 " }), _jsx(Text, { color: info, children: "/agents" }), _jsx(Text, { color: dim, children: " \u00B7 " }), _jsx(Text, { color: info, children: "/skill:list" }), _jsx(Text, { color: dim, children: " \u00B7 " }), _jsx(Text, { color: info, children: "/quit" })] })] }));
}
//# sourceMappingURL=Banner.js.map