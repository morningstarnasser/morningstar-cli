<div align="center">

<img src="https://img.shields.io/badge/%E2%98%85-MORNINGSTAR_CLI-black?style=for-the-badge&labelColor=000000&color=F59E0B" alt="Morningstar CLI" />

<br/><br/>

```
            ███╗   ███╗ ██████╗ ██████╗ ███╗   ██╗██╗███╗   ██╗ ██████╗ ███████╗████████╗ █████╗ ██████╗
            ████╗ ████║██╔═══██╗██╔══██╗████╗  ██║██║████╗  ██║██╔════╝ ██╔════╝╚══██╔══╝██╔══██╗██╔══██╗
            ██╔████╔██║██║   ██║██████╔╝██╔██╗ ██║██║██╔██╗ ██║██║  ███╗███████╗   ██║   ███████║██████╔╝
            ██║╚██╔╝██║██║   ██║██╔══██╗██║╚██╗██║██║██║╚██╗██║██║   ██║╚════██║   ██║   ██╔══██║██╔══██╗
            ██║ ╚═╝ ██║╚██████╔╝██║  ██║██║ ╚████║██║██║ ╚████║╚██████╔╝███████║   ██║   ██║  ██║██║  ██║
            ╚═╝     ╚═╝ ╚═════╝ ╚═╝  ╚═╝╚═╝  ╚═══╝╚═╝╚═╝  ╚═══╝ ╚═════╝ ╚══════╝   ╚═╝   ╚═╝  ╚═╝╚═╝  ╚═╝
```

<br/>

# Morningstar CLI

### *Your Terminal. Your AI. No Limits.*

<br/>

[![Stars](https://img.shields.io/github/stars/morningstarnasser/morningstar-cli?style=for-the-badge&logo=github&logoColor=white&labelColor=0d1117&color=F59E0B)](https://github.com/morningstarnasser/morningstar-cli/stargazers)
[![Forks](https://img.shields.io/github/forks/morningstarnasser/morningstar-cli?style=for-the-badge&logo=git&logoColor=white&labelColor=0d1117&color=6366F1)](https://github.com/morningstarnasser/morningstar-cli/network)
[![Issues](https://img.shields.io/github/issues/morningstarnasser/morningstar-cli?style=for-the-badge&logo=target&logoColor=white&labelColor=0d1117&color=EC4899)](https://github.com/morningstarnasser/morningstar-cli/issues)
[![License](https://img.shields.io/badge/License-MIT-blue?style=for-the-badge&logo=opensourceinitiative&logoColor=white&labelColor=0d1117&color=3B82F6)](LICENSE)

<br/>

[![Node.js 18+](https://img.shields.io/badge/Node.js-18+-339933?style=flat-square&logo=nodedotjs&logoColor=white)](https://nodejs.org)
[![TypeScript 5](https://img.shields.io/badge/TypeScript-5-3178C6?style=flat-square&logo=typescript&logoColor=white)](https://typescriptlang.org)
[![Ink 5](https://img.shields.io/badge/Ink_5-React_Terminal-61DAFB?style=flat-square&logo=react&logoColor=white)](https://github.com/vadimdemedes/ink)
[![Shiki](https://img.shields.io/badge/Shiki-VS_Code_Highlighting-8B5CF6?style=flat-square&logo=visualstudiocode&logoColor=white)](https://shiki.style)
[![7 Providers](https://img.shields.io/badge/Providers-7-8B5CF6?style=flat-square&logo=cloud&logoColor=white)](.)
[![12 Tools](https://img.shields.io/badge/Tools-12-06B6D4?style=flat-square&logo=wrench&logoColor=white)](.)
[![6+ Agents](https://img.shields.io/badge/Agents-6%2B_Custom-A855F7?style=flat-square&logo=robot&logoColor=white)](.)
[![65+ Commands](https://img.shields.io/badge/Commands-65+-F59E0B?style=flat-square&logo=terminal&logoColor=white)](.)
[![7 Themes](https://img.shields.io/badge/Themes-7-EC4899?style=flat-square&logo=palette&logoColor=white)](.)
[![Native Tools](https://img.shields.io/badge/Native-Function_Calling-10B981?style=flat-square&logo=lightning&logoColor=white)](.)
[![Auto-Test](https://img.shields.io/badge/Auto--Test-After_Changes-EF4444?style=flat-square&logo=check&logoColor=white)](.)
[![Sub-Agents](https://img.shields.io/badge/Sub--Agents-Task_Delegation-8B5CF6?style=flat-square&logo=robot&logoColor=white)](.)

<br/>

**A fully-featured AI coding assistant that lives in your terminal — inspired by Claude Code.**

Built with **Ink** (React for Terminal) and **Shiki** (VS Code Syntax Highlighting).<br/>
Native function calling, real token counting, auto-test after changes, sub-agent delegation,<br/>
12 tools, 60+ commands, custom agents, memory, permissions, task progress tracking, and more.

<br/>

[![DeepSeek](https://img.shields.io/badge/DeepSeek-R1_Reasoner-4A90D9?style=flat-square)](https://deepseek.com)
[![OpenAI](https://img.shields.io/badge/OpenAI-o3_|_GPT--4.1-412991?style=flat-square&logo=openai&logoColor=white)](https://openai.com)
[![Anthropic](https://img.shields.io/badge/Anthropic-Claude_4-D4A373?style=flat-square&logo=anthropic&logoColor=white)](https://anthropic.com)
[![Google](https://img.shields.io/badge/Google-Gemini_2-4285F4?style=flat-square&logo=google&logoColor=white)](https://ai.google)
[![Ollama](https://img.shields.io/badge/Ollama-Local-22C55E?style=flat-square)](https://ollama.com)
[![Groq](https://img.shields.io/badge/Groq-Fast-F55036?style=flat-square)](https://groq.com)
[![OpenRouter](https://img.shields.io/badge/OpenRouter-Any_Model-6366F1?style=flat-square)](https://openrouter.ai)

---

*Developed by [**Ali Nasser**](https://github.com/morningstarnasser)*

</div>

<br/>

## What is Morningstar CLI?

Morningstar CLI is an **open-source terminal AI coding assistant** — like Claude Code, but with **7 AI providers**, **native function calling**, **real token counting**, **sub-agent task delegation**, **auto-test after changes**, and a full permission system with per-project settings.

Built on **Ink** (React for the terminal) with **Shiki** syntax highlighting — the same engine that powers VS Code. Every UI element is a React component: the banner, input, streaming output, code blocks, tool results with Claude Code-style `⏺` headers, LCS-based diffs with line numbers, and a live task progress checklist.

One tool. Any model. Maximum control.

---

## Demo

```
╔══════════════════════════════════════════════════════════╗
║                                                          ║
║                    . .  ★  . .                           ║
║                   .  ./ . \.  .                          ║
║                  .  /  . | .  \  .                       ║
║                  ── * ─────+───── * ──                   ║
║                  .  \  . | .  /  .                       ║
║                   .  .\ . /.  .                          ║
║                    . .  ★  . .                           ║
║                                                          ║
║               M O R N I N G S T A R                      ║
║               ━━━━━━━━━━━━━━━━━━━━━━                     ║
║            Terminal AI Coding Assistant                   ║
║            Powered by Mr.Morningstar                     ║
║            github.com/morningstarnasser                  ║
║                                                          ║
╚══════════════════════════════════════════════════════════╝

┌──────────────────────────────────────────────────────────┐
│  ★ Model    DeepSeek R1 (Thinking) [deepseek]            │
│  ★ Projekt  my-app (TypeScript / Next.js)                │
│  ★ Branch   main                                         │
│  ★ CWD      /Users/dev/my-app                            │
│  ★ Theme    Morningstar Default                          │
└──────────────────────────────────────────────────────────┘

  Tools     read · write · edit · bash · grep · glob · ls · git · web · fetch · gh
  Agents    code · debug · review · refactor · architect · test
  Settings  ~/.morningstar/settings.json + .morningstar/settings.local.json
  Hilfe     /help · /features · /settings · /agents · /quit
```

**Claude Code-Style Tool Output:**

```
> Analysiere dieses Projekt und finde Probleme

  ┌─ Thinking (effort: high) ──────────────────────────────┐
  │ Scanning project structure and reading main files       │
  │ for potential issues...                                 │
  └──────────────────────────────────── 2.1s ──────────────┘

  ⏺ Read(src/app/page.tsx)
    ⎿  42 lines

  ⏺ Search("useEffect")
    ⎿  3 matches in 2 files

  ⏺ Update(src/app/page.tsx)
    ⎿  - const data = fetchData()
       + const data = await fetchData()
```

**Task Progress Checklist (Agentic Loop):**

```
  ◼ Analysing project structure...                     Turn 2/10
  ─────────────────────────────────────────────────────
  ✔ Read  src/app/page.tsx                             0.2s
  ✔ Grep  useEffect                                    0.1s
  ◼ Edit  src/app/page.tsx                             ...
  ◻ Bash  npm test
  ─────────────────────────────────────────────────────
  ⏱ 3.2s  ⎸  Tokens: 1,847  ⎸  Turn 2/10
```

**Auto-Test After File Changes:**

```
  ⏺ Update(src/utils.ts)
    ⎿  Applied 2 changes

  ✔ Auto-Test [vitest] PASSED (1.2s)
    Datei: src/utils.test.ts
    Tests: 8 passed, 0 failed
```

**LCS-Based Diffs with Line Numbers:**

```diff
  ⏺ Update(src/app/page.tsx)
     3 │  import { getData } from './lib/api'
  -  7 │  const data = fetchData()
  +  7 │  const data = await fetchData()
    10 │  return <main>
```

---

## Features

### Core

| Feature | Description |
|:--------|:------------|
| **7 AI Providers** | DeepSeek, OpenAI, Anthropic, Google, Ollama, Groq, OpenRouter |
| **Native Function Calling** | API-level tool definitions for OpenAI, Anthropic, and Google Gemini |
| **Real Token Counting** | Actual token usage from provider APIs (not estimates) — with reasoning & cache tokens |
| **Auto-Test** | Detects test runners (vitest/jest/pytest/cargo/go) and runs tests after file changes |
| **Sub-Agent Delegation** | Delegate tasks to specialized agents with `/delegate <agent> <task>` |
| **Task Progress Checklist** | Live Claude Code-style checklist with `✔`/`◼`/`◻` icons, duration, tokens, turns |
| **Parallel Tool Execution** | Execute independent tool calls concurrently for faster responses |
| **Multi-Turn Agentic Loop** | AI chains tool calls automatically (configurable up to 10 rounds) with auto-fix |
| **Claude Code-Style Output** | `⏺` tool headers, `⎿` continuation lines, LCS-based diffs with line numbers |
| **File Watcher** | Watches project files for external changes, notifies AI, triggers auto-test |
| **Conversation Branching** | Fork conversations, create named branches, switch, merge insights back |
| **Streaming Diffs** | Real-time diff preview as the AI generates edit operations |
| **Self-Update** | Check for updates from GitHub, pull latest, rebuild with `/update` |
| **Web Dashboard** | Browser-based dashboard with session stats, cost tracking, tool usage |
| **Plan Display** | Visible AI reasoning in styled box with extended thinking (4 effort levels) |
| **Real-time Streaming** | Responses appear token-by-token |
| **Project Detection** | Auto-detects language, framework, git branch |
| **Per-Project Settings** | `.morningstar/settings.local.json` with 8 permission modes |
| **Custom Agents** | Create, edit, delete, import/export your own agents |
| **Smart CD** | Change working directory mid-session with auto-detection |
| **Multi-File Context** | 10 @-mention types: `@file:`, `@files:glob`, `@folder:`, `@git:`, `@diff:file`, `@url:`, `@codebase`, `@tree` — smart chunking, context budget management |
| **Smart PR Review** | `/pr-review <number>` — fetch, analyze, and review GitHub PRs via gh CLI with structured diff analysis |
| **Prompt Caching** | Provider-aware prompt caching — Anthropic cache_control breakpoints, OpenAI prefix caching, Google context caching |
| **Terminal Multiplexer** | Split-pane layouts (default, split, triple, quad) with focus navigation, scrolling, and box-drawing borders |
| **@File Autocomplete** | Reference files with `@path/to/file` for inline context |
| **Memory System** | Persistent notes across sessions |
| **Undo System** | Revert file changes with full undo stack |
| **Image Generation** | Nano Banana Pro (Gemini 3) + local RealVisXL fallback |
| **7 Themes** | Default, Ocean, Hacker, Sunset, Nord, Rose, Claude |
| **Cost Tracking** | Real token counting with per-model cost breakdown |
| **API Server** | Expose Morningstar as HTTP API |
| **Crash-Proof** | Global error handlers prevent any crash |

---

## UI Stack

Morningstar's terminal UI is built with modern React-based rendering:

| Technology | Purpose |
|:-----------|:--------|
| **[Ink 5](https://github.com/vadimdemedes/ink)** | React renderer for the terminal — all UI is React components |
| **[React 18](https://react.dev)** | Component architecture, hooks, state management |
| **[Shiki](https://shiki.style)** | VS Code-quality syntax highlighting (vitesse-dark theme) |
| **useReducer** | Central state management via AppContext |

### Components

| Component | Description |
|:----------|:------------|
| `<Banner/>` | ASCII star logo + project info box |
| `<Input/>` | Terminal input with autocomplete & @file mentions |
| `<Suggestions/>` | Slash command autocomplete dropdown |
| `<StreamingOutput/>` | Real-time AI response with code block detection |
| `<CodeBlock/>` | Shiki-highlighted code with language label |
| `<PlanBox/>` | AI reasoning/thinking display with word-wrap |
| `<ToolResult/>` | Claude Code-style `⏺` tool headers with `⎿` continuation |
| `<ToolGroup/>` | Grouped tool display (1-2: individual, 3+: tree view) |
| `<ClaudeCodeDiff/>` | LCS-based diffs with line numbers and context hunks |
| `<TaskProgress/>` | Live task checklist with `✔`/`◼`/`◻` icons, turns, tokens |
| `<ContextRadar/>` | Real-time context window usage monitor |
| `<Spinner/>` | Claude-style animated spinner with status text |
| `<Help/>` | Structured `/help` output |
| `<Features/>` | Feature list for `/features` |

---

## Per-Project Settings (Claude Code Style)

Morningstar supports per-project configuration via `.morningstar/settings.local.json`:

```bash
# Initialize project settings
morningstar
> /settings init
```

This creates `.morningstar/settings.local.json`:

```json
{
  "permissions": {
    "allow": ["read", "write", "edit", "ls", "glob", "grep", "git"],
    "deny": [],
    "allowedCommands": ["npm test", "npm run *", "git *", "npx tsc *"],
    "deniedCommands": ["rm -rf *", "sudo *"]
  },
  "model": "deepseek-reasoner",
  "provider": "deepseek",
  "temperature": 0.6,
  "maxTokens": 8192,
  "customInstructions": "",
  "env": {}
}
```

### Settings Hierarchy

```
~/.morningstar/settings.json          ← Global defaults (all projects)
.morningstar/settings.local.json      ← Project-specific (overrides global)
```

Project settings override global settings. Tools and commands are checked against the permission lists before execution.

### Permission Modes

| Mode | Behavior |
|:-----|:---------|
| `auto` | All tools auto-allowed (no prompts) |
| `ask` | Moderate + dangerous tools require confirmation |
| `strict` | Every tool requires confirmation |
| `bypassPermissions` | Skip all permission checks |
| `acceptEdits` | Auto-accept edits, ask for others |
| `plan` | Plan mode — think before acting |
| `dontAsk` | Never ask, deny if not allowed |
| `delegate` | Sub-agent delegation mode |

Tools are categorized:

| Category | Tools | Color |
|:---------|:------|:-----:|
| **Safe** | read, ls, glob, grep, git | Green |
| **Moderate** | write, edit | Yellow |
| **Dangerous** | bash, delete | Red |

---

## 12 Built-in Tools

| Tool | Description | Undo |
|:----:|:------------|:----:|
| ![](https://img.shields.io/badge/read-06b6d4?style=flat-square) | Read files with line numbers | — |
| ![](https://img.shields.io/badge/write-10b981?style=flat-square) | Create/overwrite files (auto-creates dirs) | Yes |
| ![](https://img.shields.io/badge/edit-f59e0b?style=flat-square) | Find & replace with LCS-based colored diff output | Yes |
| ![](https://img.shields.io/badge/delete-ef4444?style=flat-square) | Delete files | Yes |
| ![](https://img.shields.io/badge/bash-a855f7?style=flat-square) | Execute commands (streaming output, 2min timeout) | — |
| ![](https://img.shields.io/badge/grep-3b82f6?style=flat-square) | Search for patterns across files | — |
| ![](https://img.shields.io/badge/glob-ec4899?style=flat-square) | Find files by glob pattern | — |
| ![](https://img.shields.io/badge/ls-f97316?style=flat-square) | List directory contents with file sizes | — |
| ![](https://img.shields.io/badge/git-6366f1?style=flat-square) | Git status + last 5 commits | — |
| ![](https://img.shields.io/badge/web-14b8a6?style=flat-square) | Fetch & parse web pages into readable text | — |
| ![](https://img.shields.io/badge/fetch-0ea5e9?style=flat-square) | HTTP requests (GET/POST) with headers & body | — |
| ![](https://img.shields.io/badge/gh-7c3aed?style=flat-square) | GitHub CLI integration (issues, PRs, repos) | — |

Tools are invoked via **native function calling** (OpenAI tools format, Anthropic `tool_use` blocks, Google `functionCall`) — not regex parsing.

---

## 7 AI Providers

<table>
<tr>
<td align="center">

**DeepSeek**
<br/><sub>R1 Reasoner, Chat</sub>

</td>
<td align="center">

**OpenAI**
<br/><sub>o3, o4, GPT-4.1, Codex</sub>

</td>
<td align="center">

**Anthropic**
<br/><sub>Claude Opus 4, Sonnet 4</sub>

</td>
<td align="center">

**Google**
<br/><sub>Gemini 2.0 Flash/Pro</sub>

</td>
</tr>
<tr>
<td align="center">

**Ollama**
<br/><sub>Any local model</sub>

</td>
<td align="center">

**Groq**
<br/><sub>LLaMA 3.3, Mixtral</sub>

</td>
<td align="center">

**OpenRouter**
<br/><sub>Any model via API</sub>

</td>
<td align="center">

**Auto-Detect**
<br/><sub>Model name → provider</sub>

</td>
</tr>
</table>

```bash
morningstar --model deepseek-reasoner     # DeepSeek R1
morningstar --model o3                     # OpenAI o3
morningstar --model claude-opus-4-20250514 # Claude Opus 4
morningstar --model gemini-2.0-flash       # Gemini
morningstar --model llama3                 # Ollama (local)
morningstar --model codex-mini-latest      # OpenAI Codex
```

API keys are stored per-provider in `~/.morningstar/config.json`. Switch providers mid-session with `/model`.

---

## 6+ Agents (Built-in + Custom)

| Agent | Command | Focus |
|:-----:|---------|-------|
| ![](https://img.shields.io/badge/Code-06b6d4?style=flat-square) | `/agent:code` | Write code, implement features |
| ![](https://img.shields.io/badge/Debug-ef4444?style=flat-square) | `/agent:debug` | Find bugs, root cause analysis |
| ![](https://img.shields.io/badge/Review-f59e0b?style=flat-square) | `/agent:review` | Code review, security, performance |
| ![](https://img.shields.io/badge/Refactor-10b981?style=flat-square) | `/agent:refactor` | Code cleanup, optimization |
| ![](https://img.shields.io/badge/Architect-d946ef?style=flat-square) | `/agent:architect` | System design, architecture |
| ![](https://img.shields.io/badge/Test-3b82f6?style=flat-square) | `/agent:test` | Write tests, improve coverage |
| ![](https://img.shields.io/badge/Custom-a855f7?style=flat-square) | `/agent:create` | **Create your own agents!** |

<details>
<summary><b>Create a Custom Agent</b></summary>

```
> /agent:create

  Neuer Agent erstellen:

  ID (z.B. security):  security
  Name:                 Security Agent
  Beschreibung:         Security Audits und Vulnerability Scanning
  Farbe:                1. Rot  2. Orange  3. Gelb  4. Gruen ...

  System Prompt (mehrzeilig, leere Zeile zum Beenden):
  Du bist ein Security-Experte. Analysiere Code auf:
  - SQL Injection, XSS, CSRF
  - Authentication/Authorization Fehler
  - Secrets im Code

  ✓ Agent "security" erstellt! Aktiviere mit /agent:security
```

Custom agents are stored in `~/.morningstar/agents.json` and support export/import for sharing.

</details>

---

## Image Generation & Vision

### Local Image Generation (Stable Diffusion)

```
> /image "A cyberpunk city at night with neon lights"

  ★ Generating with SDXL Turbo...
  ✓ Image saved: ~/.morningstar/images/img-2025-01-15-001.png
```

### Vision (Image Analysis)

```
> /vision screenshot.png "What's wrong with this UI?"

  ★ Analyzing with morningstar-vision (LLaVA 13B)...

  The screenshot shows a React component with several issues:
  1. The button lacks aria-label for accessibility
  2. The z-index stacking creates overlap with the modal
  ...
```

---

## Installation

> **Requires Node.js 18+**

```bash
git clone https://github.com/morningstarnasser/morningstar-cli.git
cd morningstar-cli
npm install
npm run build
npm link
```

Now `morningstar` is available globally.

### Set API Key

```bash
# Option 1: Environment variable
export DEEPSEEK_API_KEY="sk-your-key-here"

# Option 2: .env file
echo 'DEEPSEEK_API_KEY=sk-your-key-here' > .env

# Option 3: Interactive (first launch prompts automatically)
morningstar

# Option 4: Via CLI
morningstar
> /config set apiKey sk-your-key-here
```

---

## Usage

```bash
morningstar                          # Start in current directory
morningstar --dir /path/to/project   # Start in specific directory
morningstar --chat                   # Chat-only mode (no file tools)
morningstar --model o3               # Use OpenAI o3
morningstar --model claude-opus-4-20250514  # Use Claude Opus 4
```

---

## All Commands (65+)

<details>
<summary><b>General</b></summary>

| Command | Description |
|---------|-------------|
| `/help` | Show all commands |
| `/features` | Show all features, tools, and agents |
| `/clear` | Reset conversation history |
| `/compact` | Compress conversation (keep recent messages) |
| `/quit` | Exit (also `/exit`, `/q`) |

</details>

<details>
<summary><b>Settings & Permissions</b></summary>

| Command | Description |
|---------|-------------|
| `/settings` | Show current merged settings (global + project) |
| `/settings init` | Create `.morningstar/settings.local.json` in current project |
| `/settings edit` | Open settings.local.json in $EDITOR |
| `/settings global` | Show global settings |
| `/settings allow <tool>` | Add tool to project allow list |
| `/settings deny <tool>` | Add tool to project deny list |
| `/settings allow-command <cmd>` | Add bash command to allowed list |
| `/settings deny-command <cmd>` | Add bash command to blocked list |
| `/permissions <mode>` | Set permission mode (auto/ask/strict) |

</details>

<details>
<summary><b>AI & Model</b></summary>

| Command | Description |
|---------|-------------|
| `/model <id>` | Switch model (auto-detects provider) |
| `/providers` | List all providers with their models |
| `/context` | Show detected project info |
| `/cost` | Show real token usage and cost (per-model breakdown) |
| `/stats` | Session statistics |
| `/plan` | Toggle plan mode (think before acting) |
| `/max-turns <n>` | Set max agentic loop turns (1-10) |
| `/effort <level>` | Set thinking effort (low/medium/high/ultra) |

</details>

<details>
<summary><b>Sub-Agents & Delegation</b></summary>

| Command | Description |
|---------|-------------|
| `/delegate <agent> <task>` | Delegate a task to a specialized sub-agent |
| `/delegate:list` | List available sub-agents |

</details>

<details>
<summary><b>File Watcher & Branching</b></summary>

| Command | Description |
|---------|-------------|
| `/watch` | Toggle file watcher (auto-detects directories) |
| `/branch` | Create a new conversation branch |
| `/branch <name>` | Create a named branch |
| `/branch list` | List all branches |
| `/branch switch <id>` | Switch to a branch |
| `/branch merge <id>` | Merge branch insights back |
| `/branch delete <id>` | Delete a branch |

</details>

<details>
<summary><b>Updates & Dashboard</b></summary>

| Command | Description |
|---------|-------------|
| `/update` | Check for available updates |
| `/update run` | Pull latest, rebuild, self-update |
| `/dashboard` | Start web dashboard (default port 3030) |
| `/dashboard <port>` | Start dashboard on specific port |

</details>

<details>
<summary><b>PR Review & Caching</b></summary>

| Command | Description |
|---------|-------------|
| `/pr-review <number>` | Fetch and review a GitHub Pull Request |
| `/pr-review <url>` | Review PR by URL (extracts PR number) |
| `/cache` | Show prompt cache statistics (hits, tokens saved, cost savings) |

</details>

<details>
<summary><b>Terminal Multiplexer</b></summary>

| Command | Description |
|---------|-------------|
| `/split` | Toggle split-pane layout (Chat + Code) |
| `/split list` | Show all available layouts |
| `/split <layout>` | Switch layout (default, split, triple, quad) |

</details>

<details>
<summary><b>Agents (10 commands)</b></summary>

| Command | Description |
|---------|-------------|
| `/agents` | List available agents |
| `/agent:<id>` | Activate agent (e.g. `/agent:code`) |
| `/agent:off` | Deactivate agent |
| `/agent:create` | Interactive wizard to create a custom agent |
| `/agent:edit <id>` | Edit a custom agent |
| `/agent:delete <id>` | Delete a custom agent |
| `/agent:show <id>` | Show full agent details |
| `/agent:list` | List all agents (built-in + custom) |
| `/agent:export <id>` | Export agent as JSON |
| `/agent:import` | Import agent from JSON |

</details>

<details>
<summary><b>Memory</b></summary>

| Command | Description |
|---------|-------------|
| `/memory add <text>` | Save a persistent note |
| `/memory list` | Show all notes |
| `/memory search <q>` | Search notes |
| `/memory remove <n>` | Remove a note |
| `/memory clear` | Clear all notes |

</details>

<details>
<summary><b>Todos</b></summary>

| Command | Description |
|---------|-------------|
| `/todo add <text>` | Add a task (supports `!high` priority) |
| `/todo list` | Show all tasks |
| `/todo done <id>` | Toggle task done/undone |
| `/todo remove <id>` | Remove a task |
| `/todo clear` | Clear completed tasks |

</details>

<details>
<summary><b>Git</b></summary>

| Command | Description |
|---------|-------------|
| `/diff` | Show git diff |
| `/diff staged` | Show staged changes |
| `/commit` | Smart commit (AI analyzes & suggests message) |
| `/log` | Show git log |
| `/branch` | Show branches |
| `/status` | Show git status |

</details>

<details>
<summary><b>Image & Vision</b></summary>

| Command | Description |
|---------|-------------|
| `/image "<prompt>"` | Generate image with Stable Diffusion |
| `/image models` | List available image models |
| `/image setup` | Install local image generation |
| `/vision <file>` | Analyze image with vision model |
| `/vision models` | List vision models |

</details>

<details>
<summary><b>Files, History & Appearance</b></summary>

| Command | Description |
|---------|-------------|
| `/init` | Create MORNINGSTAR.md project note |
| `/undo` | Undo last file change |
| `/undo list` | Show undo stack |
| `/search <query>` | Search project files |
| `/history save <name>` | Save conversation |
| `/history list` | List saved sessions |
| `/history load <id>` | Load a session |
| `/theme <name>` | Set theme (default, ocean, hacker, sunset, nord, rose) |
| `/config` | Show configuration |
| `/doctor` | Diagnose setup |

</details>

---

## @-Mentions (Multi-File Context)

Reference files, directories, git data, and more inline — with smart chunking and automatic context budget management.

| Mention | Description |
|:--------|:------------|
| `@file:path` | Single file with smart chunking (preserves exports/imports) |
| `@files:src/**/*.ts` | Multiple files via glob pattern (supports `*`, `**`, `?`, `{a,b}`) |
| `@folder:path` | All text files in a directory (up to 10 files) |
| `@git:diff` | Unstaged git diff |
| `@git:log` | Last 20 commits |
| `@git:status` | Short git status |
| `@git:staged` | Staged changes |
| `@diff:path` | Git diff for a specific file (staged + unstaged) |
| `@url:https://...` | Fetch URL content |
| `@codebase` | Scan project exports (depth 4) |
| `@tree` | Directory tree (3 levels, filtered) |

**Smart Chunking** — Instead of hard line truncation, files are split into logical blocks (functions, classes, interfaces). Exported symbols are prioritized over internal ones.

**Context Budget** — Automatic token tracking (default 32k). When over budget, lowest-priority mentions are auto-truncated first (`@tree` < `@codebase` < `@url:` < `@folder:` < `@files:` < `@git:` < `@file:`).

---

## Themes

| Theme | Style |
|:-----:|-------|
| ![](https://img.shields.io/badge/default-f59e0b?style=flat-square) | Morningstar gold/amber |
| ![](https://img.shields.io/badge/ocean-0ea5e9?style=flat-square) | Blue/cyan deep sea |
| ![](https://img.shields.io/badge/hacker-22c55e?style=flat-square) | Green terminal classic |
| ![](https://img.shields.io/badge/sunset-ef4444?style=flat-square) | Warm orange/red |
| ![](https://img.shields.io/badge/nord-88c0d0?style=flat-square) | Arctic blue/frost |
| ![](https://img.shields.io/badge/rose-ec4899?style=flat-square) | Pink/rose elegance |
| ![](https://img.shields.io/badge/claude-d4a373?style=flat-square) | Minimalist monochrome (Claude Code style) |

---

## Configuration

### Global Config (`~/.morningstar/`)

```
~/.morningstar/
├── config.json              ← API keys (per provider), model, temperature, theme
├── settings.json            ← Global permission defaults
├── agents.json              ← Custom agents
├── memory.json              ← Persistent notes
├── todo.json                ← Tasks
├── history/                 ← Saved sessions
└── images/                  ← Generated images
```

### Per-Project Config (`.morningstar/`)

```
your-project/
├── .morningstar/
│   └── settings.local.json  ← Project permissions, model overrides, custom instructions
├── MORNINGSTAR.md            ← Project memory (instructions for the AI)
├── src/
└── ...
```

---

## Architecture

The UI is built entirely with **Ink** (React for Terminal) — 14 components, 3 hooks, 1 context provider.

```
morningstar-cli/
├── bin/
│   └── morningstar.js                ← Entry point
├── src/
│   ├── index.ts                      ← CLI setup (commander) + render(<App/>)
│   ├── app.tsx                       ← Main Ink app (state, commands, agentic loop)
│   │
│   ├── components/                   ← React UI Components
│   │   ├── Banner.tsx                ← ASCII logo + project info
│   │   ├── Help.tsx                  ← /help output
│   │   ├── Features.tsx              ← /features output
│   │   ├── Input.tsx                 ← Terminal input with @file autocomplete
│   │   ├── Suggestions.tsx           ← Autocomplete dropdown
│   │   ├── StreamingOutput.tsx       ← AI response renderer
│   │   ├── CodeBlock.tsx             ← Shiki syntax highlighting
│   │   ├── PlanBox.tsx               ← AI reasoning display
│   │   ├── ToolResult.tsx            ← Claude Code-style ⏺ tool display
│   │   ├── ToolGroup.tsx             ← Grouped tool results (tree view)
│   │   ├── ClaudeCodeDiff.tsx        ← LCS-based diffs with line numbers
│   │   ├── TaskProgress.tsx          ← Live task progress checklist
│   │   ├── ContextRadar.tsx          ← Context window usage monitor
│   │   └── Spinner.tsx               ← Animated spinner
│   │
│   ├── context/
│   │   └── AppContext.tsx             ← Global state (useReducer)
│   │
│   ├── hooks/
│   │   ├── useTheme.ts               ← Theme colors for Ink
│   │   ├── useChat.ts                ← AI streaming state
│   │   └── useHistory.ts             ← Command history
│   │
│   ├── ai.ts                         ← Multi-provider streaming
│   ├── providers.ts                  ← 7 providers + native function calling
│   ├── tool-definitions.ts           ← Tool schemas (OpenAI/Anthropic/Google formats)
│   ├── tools.ts                      ← 12 tools + executor
│   ├── sub-agents.ts                 ← Sub-agent task delegation
│   ├── auto-test.ts                  ← Auto-test after file changes
│   ├── settings.ts                   ← Per-project + global settings
│   ├── permissions.ts                ← 8 permission modes
│   ├── agents.ts                     ← 6 built-in agents
│   ├── custom-agents.ts              ← Custom agent CRUD
│   ├── file-agents.ts                ← File-based agents (.md with frontmatter)
│   ├── agent-teams.ts                ← Agent team orchestration
│   ├── skills.ts                     ← Skill system (.md-based)
│   ├── rules.ts                      ← Project rules system
│   ├── hooks-system.ts               ← 14 hook events
│   ├── memory.ts                     ← Persistent notes
│   ├── project-memory.ts             ← MORNINGSTAR.md context
│   ├── todo.ts                       ← Task management
│   ├── history.ts                    ← Session save/load
│   ├── input-history.ts              ← Persistent input history
│   ├── undo.ts                       ← Undo stack
│   ├── checkpoints.ts                ← Git checkpoint/rewind
│   ├── theme.ts                      ← 7 color themes
│   ├── thinking.ts                   ← Extended thinking (4 effort levels)
│   ├── context.ts                    ← Project auto-detection
│   ├── cost-tracker.ts               ← Real token counting & cost
│   ├── dep-graph.ts                  ← Dependency graph visualization
│   ├── repo-map.ts                   ← Repository analysis
│   ├── mentions.ts                   ← @-mentions (10 types) + smart chunking + context budget
│   ├── pr-review.ts                  ← Smart PR review via gh CLI
│   ├── prompt-cache.ts               ← Provider-aware prompt caching
│   ├── terminal-multiplexer.ts       ← Split-pane layout engine
│   ├── sandbox.ts                    ← OS-level sandboxing
│   ├── mcp-client.ts                 ← MCP protocol client
│   ├── plugins.ts                    ← Plugin system
│   ├── file-watcher.ts               ← File watcher (watch mode)
│   ├── conversation-branch.ts        ← Conversation branching
│   ├── streaming-diff.ts             ← Real-time streaming diffs
│   ├── self-update.ts                ← Self-update from GitHub
│   ├── web-dashboard.ts              ← Browser-based dashboard
│   ├── image-gen.ts                  ← AI image generation
│   ├── git-integration.ts            ← Smart commits
│   ├── server.ts                     ← HTTP API server
│   └── types.ts                      ← TypeScript interfaces
├── dist/                             ← Compiled JavaScript
├── MORNINGSTAR.md                    ← Project documentation
├── package.json
├── tsconfig.json
└── README.md
```

### How It Works

```
 ┌─────────────┐    ┌───────────┐    ┌──────────────┐    ┌──────────────┐
 │  <Input/>    │───→│  Router    │───→│  7 Providers │───→│ <Streaming   │
 │  @file auto  │    │ 60+ cmds   │    │  SSE + Tools │    │  Output/>    │
 └─────────────┘    └───────────┘    └──────────────┘    └──────────────┘
       │                 │                    │                   │
       ▼                 ▼                    ▼                   ▼
 ┌───────────┐    ┌───────────┐       ┌──────────────┐   ┌──────────────┐
 │ <Suggest  │    │ Settings   │       │ Native Func  │   │ <CodeBlock/> │
 │  ions/>   │    │ 8 perm     │       │  Calling     │   │  Shiki HL    │
 │ Tab comp  │    │  modes     │       │ 12 tools     │   │ <PlanBox/>   │
 └───────────┘    └───────────┘       └──────────────┘   └──────────────┘
                                            │
                                     ┌──────┴──────┐
                                     ▼             ▼
                              ┌────────────┐ ┌────────────┐
                              │<ToolResult>│ │<AutoTest/> │
                              │ ⏺ headers  │ │ vitest/jest│
                              │ LCS diffs  │ │ pytest/go  │
                              └────────────┘ └────────────┘
                                     │
                                     ▼
                              ┌──────────────┐
                              │<TaskProgress>│
                              │ ✔/◼/◻ turns │
                              │  up to 10x   │
                              └──────────────┘
```

---

## Related Projects

| Project | Description |
|:--------|:------------|
| [**MORNINGSTAR-Vision-AI**](https://github.com/morningstarnasser/MORNINGSTAR-Vision-AI) | The AI model system — 14B, 32B, and Vision models for Ollama |
| [**Moringstar-AI-Tools**](https://github.com/morningstarnasser/Moringstar-AI-Tools) | Web-based AI image generation & editing platform |

---

## License

MIT License — Free for commercial and personal use.

---

<div align="center">

<br/>

[![Built by Ali Nasser](https://img.shields.io/badge/Built_by-Ali_Nasser-F59E0B?style=for-the-badge&logo=github&logoColor=white&labelColor=0d1117)](https://github.com/morningstarnasser)

**Your Terminal. Your AI. No Limits.**

<sub>Built for engineers who live in the terminal.</sub>

</div>
